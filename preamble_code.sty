\ProvidesPackage{preamble_code}

% Include code in document
\usepackage{listings}
\lstset{frame=single} % Add a frame around code snippets

% Wraps lstlistings env in a minipage to stop it breaking across pages
\lstnewenvironment{codebox}
    {\minipage{\linewidth}}
    {\endminipage}

% Custom pseudocode language
\lstdefinelanguage{pseudo}
{
    morekeywords={Input, Output, while, for, to, if, do, then, end if, end for, end while, return}
}

% Use
% \lstset{mathescape=true, escapeinside={@}{@}}
% Before codeboxes requiring maths / escaping